# Softverse Configuration

# Data sources
data_sources:
  dataverse:
    base_url: "https://dataverse.harvard.edu/api"
    input_csv: "data/dataverse_socialscience.csv"
    output_dir: "data/datasets/"
    enabled: true

  zenodo:
    base_url: "https://zenodo.org/api/records"
    communities:
      - "es-replication-repository"
      - "restud-replication"
      - "ej-replication-repository"
      - "pemj"
    output_dir: "scripts/zenodo/"
    enabled: true

  icpsr:
    base_url: "https://www.openicpsr.org"
    output_dir: "scripts/icpsr/"
    enabled: true

# Processing settings
processing:
  parallel_workers: 4
  valid_extensions:
    - ".R"
    - ".py"
    - ".do"
    - ".Rscript"
    - ".ipynb"
  chunk_size: 8192

# Output settings
output:
  base_dir: "outputs/"
  files:
    datasets_archive: "raw_data/datasets_by_dataverse.tar.gz"
    files_archive: "raw_data/files_in_dataverse.tar.gz"
    scripts_archive: "raw_data/script_files.tar.gz"
    file_imports: "final_results/detailed_file_imports.csv"
    package_imports: "final_results/library_usage_summary.csv"

# Logging configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/softverse.log"
  max_size_mb: 100
  backup_count: 5

# API settings
api:
  request_timeout: 30
  max_retries: 3
  retry_delay: 1.0

# Incremental processing
incremental:
  enabled: true
  checkpoints_dir: "checkpoints/"
  force_refresh: false

# Storage management
storage:
  # Archive handling settings
  keep_archives: false  # Whether to keep downloaded ZIP files after extraction
  cleanup_temp_files: true  # Whether to clean up temporary files
  temp_dir: "temp/"  # Temporary directory for downloads

  # Archive processing options
  sequential_processing: true  # Process archives one at a time to minimize storage
  progress_indicators: true  # Show detailed progress for archive operations
  failed_archives_dir: "failed_archives/"  # Directory to store failed archive info

  # Error recovery settings
  safe_deletion: true  # Verify extraction before deleting archives
  preserve_failed_archives: true  # Keep archives that failed to extract
  max_retry_attempts: 3  # Maximum retries for failed archive operations

  # Storage efficiency settings
  min_free_space_gb: 5.0  # Minimum free space required before starting downloads
  max_temp_size_gb: 50.0  # Maximum size for temporary storage directory
